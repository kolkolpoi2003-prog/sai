# üöÄ –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –∑–∞–ø—É—Å–∫—É —Å–∞–π—Ç–∞ –Ω–∞ VPS (Docker + SSL)

–≠—Ç–æ—Ç –≥–∞–π–¥ –ø–æ–º–æ–∂–µ—Ç –≤–∞–º —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—å –ø—Ä–æ–µ–∫—Ç `yarko-solntse.ru` –Ω–∞ —á–∏—Å—Ç–æ–º —Å–µ—Ä–≤–µ—Ä–µ. –ú—ã –±—É–¥–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Docker ‚Äî —ç—Ç–æ –ø–æ–∑–≤–æ–ª–∏—Ç –∑–∞–ø—É—Å—Ç–∏—Ç—å —Å–∞–π—Ç –±—ã—Å—Ç—Ä–æ –∏ –±–µ–∑ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π.

---

## üìã –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è
1. **VPS** (Ubuntu 22.04 –∏–ª–∏ 24.04 —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è).
2. **–î–æ–º–µ–Ω** `yarko-solntse.ru` —É–∂–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω –Ω–∞ IP —Å–µ—Ä–≤–µ—Ä–∞ `37.252.19.159`.
3. **SSH-–¥–æ—Å—Ç—É–ø** –∫ —Å–µ—Ä–≤–µ—Ä—É.

---

## –®–∞–≥ 1: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞ (–£—Å—Ç–∞–Ω–æ–≤–∫–∞ Docker)

–ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ —Å–µ—Ä–≤–µ—Ä—É —á–µ—Ä–µ–∑ —Ç–µ—Ä–º–∏–Ω–∞–ª/PowerShell:
```bash
ssh root@37.252.19.159
```

–í—ã–ø–æ–ª–Ω–∏—Ç–µ –∫–æ–º–∞–Ω–¥—ã –¥–ª—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏ Docker (–ø—Ä–æ—Å—Ç–æ —Å–∫–æ–ø–∏—Ä—É–π—Ç–µ –∏ –≤—Å—Ç–∞–≤—å—Ç–µ –≤—Å—ë —Å—Ä–∞–∑—É):
```bash
sudo apt update && sudo apt upgrade -y
sudo apt install -y docker.io docker compose git
sudo systemctl enable --now docker
```

---

## –®–∞–≥ 2: –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞ —Å GitHub

–ú—ã —Å–∫–∞—á–∞–µ–º –ø—Ä–æ–µ–∫—Ç –ø—Ä—è–º–æ –∏–∑ –≤–∞—à–µ–≥–æ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è –≤ –ø–∞–ø–∫—É `/app`:
```bash
git clone https://github.com/kolkolpoi2003-prog/sai.git /app
cd /app
```

---

## –®–∞–≥ 3: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–µ–∫—Ä–µ—Ç–æ–≤ (–§–∞–π–ª .env)

–ù–∞ —Å–µ—Ä–≤–µ—Ä–µ –Ω—É–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å —Ñ–∞–π–ª `.env`, –≥–¥–µ —Ö—Ä–∞–Ω—è—Ç—Å—è –ø–∞—Ä–æ–ª–∏ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏. –Ø –ø–æ–¥–≥–æ—Ç–æ–≤–∏–ª –¥–ª—è –≤–∞—Å —à–∞–±–ª–æ–Ω.

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª:
```bash
cp .env.example .env
```

–û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ –µ–≥–æ (—è —É–∂–µ –≤—Å—Ç–∞–≤–∏–ª —Ç—É–¥–∞ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–ª—é—á):
```bash
nano .env
```
*(–ù–∞–∂–º–∏—Ç–µ `Ctrl+O` –∑–∞—Ç–µ–º `Enter` –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è, –∏ `Ctrl+X` –¥–ª—è –≤—ã—Ö–æ–¥–∞ –∏–∑ —Ä–µ–¥–∞–∫—Ç–æ—Ä–∞)*

---

## –®–∞–≥ 4: –ü–æ–ª—É—á–µ–Ω–∏–µ SSL-—Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞ (HTTPS)

–≠—Ç–æ —Å–∞–º—ã–π –≤–∞–∂–Ω—ã–π —à–∞–≥ –¥–ª—è —Ç–æ–≥–æ, —á—Ç–æ–±—ã —Å–∞–π—Ç –æ—Ç–∫—Ä—ã–≤–∞–ª—Å—è –ø–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ–º—É –ø—Ä–æ—Ç–æ–∫–æ–ª—É.

1. **–í—Ä–µ–º–µ–Ω–Ω–æ** –æ—Ç–∫–ª—é—á–∏—Ç–µ –ø—Ä–æ–≤–µ—Ä–∫—É —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤ –≤ –∫–æ–Ω—Ñ–∏–≥–µ Nginx, —á—Ç–æ–±—ã –º—ã –º–æ–≥–ª–∏ –∏—Ö –ø–æ–ª—É—á–∏—Ç—å:
   ```bash
   # –≠—Ç–∞ –∫–æ–º–∞–Ω–¥–∞ –∑–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä—É–µ—Ç —Å—Ç—Ä–æ–∫–∏ —Å–æ —Å–ª–æ–≤–æ–º ssl –Ω–∞ –≤—Ä–µ–º—è
   sed -i 's/listen 443 ssl;/#listen 443 ssl;/g' nginx/default.conf
   sed -i 's/ssl_certificate/#ssl_certificate/g' nginx/default.conf
   ```

2. –ó–∞–ø—É—Å—Ç–∏—Ç–µ Nginx –∏ Certbot:
   ```bash
   docker compose up -d nginx certbot
   ```

3. –ó–∞–ø—Ä–æ—Å–∏—Ç–µ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç —É Let's Encrypt:
   ```bash
   docker compose run --rm certbot certonly --webroot --webroot-path=/var/www/certbot -d yarko-solntse.ru -d www.yarko-solntse.ru --email vladimirshurkk@gmail.com --agree-tos --no-eff-email
   ```

4. **–í–µ—Ä–Ω–∏—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –æ–±—Ä–∞—Ç–Ω–æ**:
   ```bash
   sed -i 's/#listen 443 ssl;/listen 443 ssl;/g' nginx/default.conf
   sed -i 's/#ssl_certificate/ssl_certificate/g' nginx/default.conf
   ```

5. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ Nginx:
   ```bash
   docker compose restart nginx
   ```

---

## –®–∞–≥ 5: –ó–∞–ø—É—Å–∫ —Å–∞–π—Ç–∞

–¢–µ–ø–µ—Ä—å –∑–∞–ø—É—Å–∫–∞–µ–º –≤—Å—ë –æ—Å—Ç–∞–ª—å–Ω–æ–µ (–±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö –∏ —Å–∞–º–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ):
```bash
docker compose up -d --build
```

### –§–∏–Ω–∞–ª—å–Ω—ã–µ —à—Ç—Ä–∏—Ö–∏ (–≤–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞):
–ü—Ä–∏–º–µ–Ω–∏—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –∏ —Å–æ–∑–¥–∞–π—Ç–µ –∞–¥–º–∏–Ω–∞:
```bash
# –°–æ–∑–¥–∞–µ–º —Ç–∞–±–ª–∏—Ü—ã –≤ –±–∞–∑–µ
docker-compose exec web python manage.py migrate

# –°–æ–∑–¥–∞–µ–º –ª–æ–≥–∏–Ω/–ø–∞—Ä–æ–ª—å –¥–ª—è –≤—Ö–æ–¥–∞ –≤ –∞–¥–º–∏–Ω–∫—É /admin
docker-compose exec web python manage.py createsuperuser
```

---

## üõ† –ö–∞–∫ —É–ø—Ä–∞–≤–ª—è—Ç—å —Å–∞–π—Ç–æ–º –≤ –±—É–¥—É—â–µ–º

*   **–ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ª–æ–≥–∏ (–µ—Å–ª–∏ —á—Ç–æ-—Ç–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç):**
    `docker-compose logs -f`
*   **–û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –≤—Å—ë:**
    `docker-compose down`
*   **–û–±–Ω–æ–≤–∏—Ç—å –∫–æ–¥ –ø–æ—Å–ª–µ –ø—É—à–∞ –≤ GitHub:**
    ```bash
    git pull origin main
    docker-compose up -d --build
    ```

–°–∞–π—Ç –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ –∞–¥—Ä–µ—Å—É: **https://yarko-solntse.ru**
